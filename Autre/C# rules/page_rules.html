<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>DEV Documentation: C# Rules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygenextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="topbanner"></div>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_rules.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C# Rules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#rules_format">Common C# syntax format</a><ul><li class="level2"><a href="#rules_format_case">Case sensitivity</a></li>
<li class="level2"><a href="#rules_format_brackets">Brackets</a></li>
<li class="level2"><a href="#rules_coding_nspclass_mprop">Members and properties</a></li>
<li class="level2"><a href="#type_of_types">Decide between Value Types and Reference Types</a></li>
<li class="level2"><a href="#rules_coding_nspclass_enum">Enum</a></li>
<li class="level2"><a href="#minimize_returns">Return statements</a></li>
<li class="level2"><a href="#conditional_attributes">Conditional Attributes</a></li>
<li class="level2"><a href="#rules_coding_nspclass_delevent">Delegates and events</a></li>
<li class="level2"><a href="#rules_format_regions">Regions</a></li>
</ul>
</li>
<li class="level1"><a href="#file_organization">File organization</a><ul><li class="level2"><a href="#solution_tree">Solution tree</a></li>
<li class="level2"><a href="#rules_coding_nspclass">Namespaces and classes</a></li>
</ul>
</li>
<li class="level1"><a href="#rules_coding_codeimpl">Code implementation rules</a><ul><li class="level2"><a href="#rules_coding_codeimpl_tryc">Exceptions</a><ul><li class="level3"><a href="#rules_coding_codeimpl_tryc_hdl">Handle exceptions</a></li>
<li class="level3"><a href="#rules_coding_codeimpl_tryc_trw">Throw exceptions</a></li>
</ul>
</li>
<li class="level2"><a href="#rules_coding_codeimpl_op">operators</a></li>
<li class="level2"><a href="#rules_coding_codeimpl_typecast">Types and Cast</a></li>
<li class="level2"><a href="#rules_coding_codeimpl_str">Strings</a></li>
<li class="level2"><a href="#rules_coding_codeimpl_ext">C# Extensions</a></li>
</ul>
</li>
<li class="level1"><a href="#rules_coding_comments">Comments the code</a><ul><li class="level2"><a href="#special_comments">Special comments</a></li>
<li class="level2"><a href="#trash_code_comments">Trash code comments</a></li>
<li class="level2"><a href="#rules_comment_code_csharp">Comment C# code</a></li>
<li class="level2"><a href="#rules_comment_code_cpp">Comment C++ code</a></li>
</ul>
</li>
<li class="level1"><a href="#rules_references">See also</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="rules_format"></a>
Common C# syntax format</h1>
<dl class="section note"><dt>Note</dt><dd>Everything that is not <b>explicitly authorized</b> is <b>implicitly forbidden</b>. We want to keep consistency between every parts of code.</dd></dl>
<h2><a class="anchor" id="rules_format_case"></a>
Case sensitivity</h2>
<ul>
<li>Use <code>PascalCasing</code> for class names, method names and properties, even if it's <code>private</code>, <code>protected</code> or <code>internal</code>;</li>
<li>Use <code>camelCasing</code> for method arguments and local variables;</li>
<li>Use <code>_underscoredCamelCasing</code> for private fields.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>ClientActivity</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> <span class="keywordtype">int</span> _value;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> ClearStatistics()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> CalculateStatistics()</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#af76284d70e23a2210869000a3240471aaec211f7c20af43e742bf2570c3cb84f9">Add</a>(LogEvent logEvent)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> itemCount = logEvent.Items.Count;</div>
<div class="line">            <span class="keywordflow">if</span> (itemCount != 0)</div>
<div class="line">            {</div>
<div class="line">                \\...</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Why:</b> Keeps consistency with the Microsoft's .NET Framework and is easy to read and to maintain.</p>
<dl class="section warning"><dt>Warning</dt><dd><ul>
<li>Do not use <em>Hungarian</em> notation or any other type identification in identifiers. <div class="fragment"><div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keywordtype">int</span> counter;</div>
<div class="line"><span class="keywordtype">string</span> name;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Avoid</span></div>
<div class="line"><span class="keywordtype">int</span> iCounter;</div>
<div class="line"><span class="keywordtype">string</span> strName;</div>
</div><!-- fragment --></li>
</ul>
</dd>
<dd>
<ul>
<li>Do not use <em>Screaming Caps</em> for constants or readonly variables. <div class="fragment"><div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">string</span> ShippingType = <span class="stringliteral">&quot;DropShip&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Avoid</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">string</span> SHIPPINGTYPE = <span class="stringliteral">&quot;DropShip&quot;</span>;</div>
</div><!-- fragment --></li>
</ul>
</dd>
<dd>
<ul>
<li>Do not use <em>Underscores</em> in identifiers. Exception: you <b>must</b> prefix private fields and private static variables with an underscore. <div class="fragment"><div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keyword">public</span> DateTime clientAppointment;</div>
<div class="line"><span class="keyword">public</span> TimeSpan timeLeft;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Avoid</span></div>
<div class="line"><span class="keyword">public</span> DateTime client_Appointment;</div>
<div class="line"><span class="keyword">public</span> TimeSpan time_Left;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Exception</span></div>
<div class="line"><span class="keyword">private</span> DateTime _registrationDate;</div>
</div><!-- fragment --></li>
</ul>
</dd>
<dd>
<b>Why:</b> Consistency with the Microsoft's .NET Framework and makes code more natural to read (Visual Studio IDE makes determining types very easy (via tooltips)). Avoids underline stress (inability to see underline). In general you want to avoid type indicators in any identifier.</dd></dl>
<h2><a class="anchor" id="rules_format_brackets"></a>
Brackets</h2>
<p>Use brackets { } (always 2 even for a single if or for) on a new line and vertically aligned. </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordflow">if</span> (something)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordflow">if</span> (something) {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keywordflow">if</span> (something)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="rules_coding_nspclass_mprop"></a>
Members and properties</h2>
<p>Prefer Properties instead of Public Variables. It makes your code properly encapsulated in OOPs environment. By using getters &amp; setters, you can restrict the user directly accessing the member variables. Also, properties give you easier validation for your data. Let's see a small code: </p><div class="fragment"><div class="line"><span class="comment">// Avoid</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Person</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> _name;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> GetNameInLowerCase()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keywordtype">string</span>.IsNullOrWhiteSpace(_name) ? </div>
<div class="line">                <span class="keywordtype">string</span>.Empty : _name.ToLower();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> GetNameInUpperCase()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keywordtype">string</span>.IsNullOrWhiteSpace(_name) ? </div>
<div class="line">                <span class="keywordtype">string</span>.Empty : _name.ToUpper();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Person</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> <span class="keywordtype">string</span> _name;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> Name</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">get</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keywordtype">string</span>.IsNullOrWhiteSpace(_name) ? <span class="keywordtype">string</span>.Empty : _name;</div>
<div class="line">        }</div>
<div class="line">        set { _name = value; }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> GetNameInLowerCase()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> Name.ToLower();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> GetNameInUpperCase()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> Name.ToUpper();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Member variables are used internaly to the class and so <b>always</b> have private access (no access elsewhere is allowed)! Prefer the use of Properties to modify read/write access (get or set). </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Person</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">internal</span> <span class="keywordtype">string</span> _name;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Person</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> Name {<span class="keyword">get</span>; <span class="keyword">internal</span> set;}</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="type_of_types"></a>
Decide between Value Types and Reference Types</h2>
<p>If you want to store your data, use value types and when you want to create an instance of your type by defining the behavior, use reference types. Value types <b>are not</b> Polymorphic whereas Reference types can be. Value types are most efficient in terms of memory utilization over reference types and produce less heap fragmentation &amp; garbage.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> Main(<span class="keywordtype">string</span>[] args)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i = 5;</div>
<div class="line">    SetValues(i);</div>
<div class="line">    <a class="code" href="namespaceSystem.html">System</a>.Console.WriteLine(<span class="stringliteral">&quot;Currently i = &quot;</span> + i); <span class="comment">// will print &quot;Currently i = 5&quot;</span></div>
<div class="line">    SetOtherValues(i);</div>
<div class="line">    <a class="code" href="namespaceSystem.html">System</a>.Console.WriteLine(<span class="stringliteral">&quot;Currently i = &quot;</span> + i); <span class="comment">// will print &quot;Currently i = 20&quot;</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> SetValues(<span class="keywordtype">int</span> x)</div>
<div class="line">{</div>
<div class="line">    x += 10;</div>
<div class="line">}</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> SetOtherValues(ref <span class="keywordtype">int</span> x)</div>
<div class="line">{</div>
<div class="line">    x += 15;</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Avoid too many parameters. Declare a class or struct instead of too many parameters. Creating a class or struct that puts all these parameters together is generally a better design and valuable abstraction. <div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> Checkout(<span class="keywordtype">string</span> shippingName, <span class="keywordtype">string</span> shippingCity, </div>
<div class="line">        <span class="keywordtype">string</span> shippingSate, <span class="keywordtype">string</span> shippingZip, <span class="keywordtype">string</span> billingName, </div>
<div class="line">        <span class="keywordtype">string</span> billingCity, <span class="keywordtype">string</span> billingSate, <span class="keywordtype">string</span> billingZip)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}  </div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> Checkout(ShippingAddress shippingAddress,BillingAddress billingAddress)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<h2><a class="anchor" id="rules_coding_nspclass_enum"></a>
Enum</h2>
<p>Use singular names for non-flagged enums and plural names for flagged enums. </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#a977f92b3d73510593fe7ea86a9d1d2e8acb5feb1b7314637725a2e73bdc9f7295">Color</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1Content.html#a7343a98587ba86bdfca212dc051f91c4aee38e4d5dd68c4e440825018d549cb47">Red</a>,</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1Content.html#a7343a98587ba86bdfca212dc051f91c4ad382816a3cbeed082c9e216e7392eed1">Green</a>,</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1Content.html#a7343a98587ba86bdfca212dc051f91c4a9594eec95be70e7b1710f730fdda33d9">Blue</a>,</div>
<div class="line">    Yellow,</div>
<div class="line">    Magenta,</div>
<div class="line">    Cyan</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">[Flags]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Dockings</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#a72136b566c7e05b47b630b00fa6c753ca6adf97f83acf6453d4a6a4b1070f3754">None</a> = 0,</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1UserInterface.html#a2d868aa6f0b9b76af35ace52da278a19aa4ffdcf0dc1f31b9acaf295d75b51d00">Top</a> = 1, </div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#a08d34bda312804ced18b49b9d222b982a92b09c7c48c520c3c55e497875da437c">Right</a> = 2, </div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1UserInterface.html#a2d868aa6f0b9b76af35ace52da278a19a2ad9d63b69c4a10a5cc9cad923133bc4">Bottom</a> = 4,</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#a08d34bda312804ced18b49b9d222b982a945d5e233cf7d6240f6b783b36a374ff">Left</a> = 8</div>
<div class="line">}</div>
</div><!-- fragment --><p> <b>Why:</b> consistent with the Microsoft's .NET Framework and makes the code more natural to read. Plural flags because enum can hold multiple values (using bitwise 'OR').</p>
<dl class="section warning"><dt>Warning</dt><dd>Do not explicitly specify a type of an enum or values of enums. Exceptions for flags and binary-used enums (serialization for instance). <div class="fragment"><div class="line"><span class="comment">// Don&#39;t</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <a class="code" href="CubeGaussianBlur_8h.html#a49474a34316d28d420b6bb4318d50e5c">Direction</a> : <span class="keywordtype">long</span></div>
<div class="line">{</div>
<div class="line">    North = 1,</div>
<div class="line">    East = 2,</div>
<div class="line">    South = 3,</div>
<div class="line">    West = 4</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <a class="code" href="CubeGaussianBlur_8h.html#a49474a34316d28d420b6bb4318d50e5c">Direction</a></div>
<div class="line">{</div>
<div class="line">    North,</div>
<div class="line">    East,</div>
<div class="line">    South,</div>
<div class="line">    West</div>
<div class="line">}</div>
</div><!-- fragment --> <b>Why:</b> can create confusion when relying on actual types and values.</dd>
<dd>
Do not use enum suffix which rely on an Enum type. <div class="fragment"><div class="line"><span class="comment">// Don&#39;t</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> CoinEnum</div>
<div class="line">{</div>
<div class="line">    Penny,</div>
<div class="line">    Nickel,</div>
<div class="line">    Dime,</div>
<div class="line">    Quarter,</div>
<div class="line">    Dollar</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Coin</div>
<div class="line">{</div>
<div class="line">    Penny,</div>
<div class="line">    Nickel,</div>
<div class="line">    Dime,</div>
<div class="line">    Quarter,</div>
<div class="line">    Dollar</div>
<div class="line">}</div>
</div><!-- fragment --> <b>Why:</b> consistent with the Microsoft's .NET Framework and consistent with prior rule of <b>no type indicators in identifiers</b>.</dd></dl>
<p>Use '0' (zero) as Default Value Enum Value Types. While we write the enum definition, sometime we miss to set the Default value to it. In that case, it will set automatically as 0 (zero). </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> PersonType </div>
<div class="line">{ </div>
<div class="line">    Customer = 1 </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>Program </div>
<div class="line">{ </div>
<div class="line">    <span class="comment">// will always print 0 (zero) as output and you have to explicitly set the default value for it</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> Main(<span class="keywordtype">string</span>[] args) </div>
<div class="line">    { </div>
<div class="line">        PersonType personType = <span class="keyword">new</span> PersonType(); </div>
<div class="line">        Console.WriteLine(personType); </div>
<div class="line">    } </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> PersonType </div>
<div class="line">{ </div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#a72136b566c7e05b47b630b00fa6c753ca6adf97f83acf6453d4a6a4b1070f3754">None</a> = 0, </div>
<div class="line">    Customer = 1 </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>Program </div>
<div class="line">{ </div>
<div class="line">    <span class="comment">// will print “None” to the output screen.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> Main(<span class="keywordtype">string</span>[] args) </div>
<div class="line">    { </div>
<div class="line">        PersonType personType = <span class="keyword">new</span> PersonType(); </div>
<div class="line">        Console.WriteLine(personType); </div>
<div class="line">    } </div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="minimize_returns"></a>
Return statements</h2>
<p>Minimize the number of returns in a method. </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="namespaceOptis_1_1Imagine_1_1Importer.html#a5b4734b246086ad2a8e50004bb6286a3af5bf48aa40cad7891eb709fcf1fde128">product</a>.Price &gt; 15)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceOptis_1_1Imagine_1_1Importer.html#a5b4734b246086ad2a8e50004bb6286a3af5bf48aa40cad7891eb709fcf1fde128">product</a>.IsDeleted)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespaceOptis_1_1Imagine_1_1Importer.html#a5b4734b246086ad2a8e50004bb6286a3af5bf48aa40cad7891eb709fcf1fde128">product</a>.IsFeatured)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> ()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line">var isValid = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="namespaceOptis_1_1Imagine_1_1Importer.html#a5b4734b246086ad2a8e50004bb6286a3af5bf48aa40cad7891eb709fcf1fde128">product</a>.Price &gt; 15)</div>
<div class="line">{</div>
<div class="line">    isValid = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceOptis_1_1Imagine_1_1Importer.html#a5b4734b246086ad2a8e50004bb6286a3af5bf48aa40cad7891eb709fcf1fde128">product</a>.IsDeleted)</div>
<div class="line">{</div>
<div class="line">    isValid = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespaceOptis_1_1Imagine_1_1Importer.html#a5b4734b246086ad2a8e50004bb6286a3af5bf48aa40cad7891eb709fcf1fde128">product</a>.IsFeatured)</div>
<div class="line">{</div>
<div class="line">    isValid = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">return</span> isValid;</div>
</div><!-- fragment --><h2><a class="anchor" id="conditional_attributes"></a>
Conditional Attributes</h2>
<p>Use Conditional Attributes when you need them rather than preprocessor directives. </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keyword">private</span> <span class="keywordtype">void</span> PrintFirstName() </div>
<div class="line">{ </div>
<div class="line">    <span class="keywordtype">string</span> firstName = <span class="keywordtype">string</span>.Empty; </div>
<div class="line"><span class="preprocessor">    #if DEBUG </span></div>
<div class="line">    firstName = GetFirstName(); </div>
<div class="line"><span class="preprocessor">    #endif </span></div>
<div class="line">    Console.WriteLine(firstName); </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line">[Conditional(<span class="stringliteral">&quot;DEBUG&quot;</span>)]</div>
<div class="line"><span class="keyword">private</span> <span class="keywordtype">void</span> PrintFirstName()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">string</span> firstName = GetFirstName();</div>
<div class="line">    Console.WriteLine(firstName);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="rules_coding_nspclass_delevent"></a>
Delegates and events</h2>
<ul>
<li>Event declaration: <code>event &lt;EventHandler&gt; &lt;EventName&gt;Event</code></li>
<li>Method which raises the event: <code>void Raise&lt;EventName&gt;([&lt;EventArgs or args&gt;])</code> <div class="fragment"><div class="line"><span class="keyword">event</span> EventHandler PreDisposeEvent;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> RaisePreDisposeEvent()</div>
<div class="line">{</div>
<div class="line">    EventHandler handler = PreDisposeEvent;</div>
<div class="line">    <span class="keywordflow">if</span> (handler != null)</div>
<div class="line">    {</div>
<div class="line">        handler(<span class="keyword">this</span>, EventArgs.Empty);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Link the method name to the associated event: <code>void On&lt;EventName&gt;(object sender, [&lt;EventArgs&gt; e])</code> <div class="fragment"><div class="line">PreDisposeEvent += <span class="keyword">new</span> EventHandler(OnPreDisposeEvent);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> OnPreDisposeEvent(<span class="keywordtype">object</span> sender, EventArgs e)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//... some code on raised PreDisposeEvent event</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="rules_format_regions"></a>
Regions</h2>
<p>Minimize as more as possible the use of region.</p><ul>
<li>Do not use region inside a methods, refactor instead! Methods must be short. If there are only ten lines in a method, you probably wouldn't use regions to hide five of them when working on other five. Also, each method must do one and one only thing. Regions, on the other hand, are intended to separate different things.</li>
<li>Try to avoid the use of regions outside methods:<ul>
<li>Grouping together fields, properties... is not necessary since the code should be StyleCop-compliant, then fields, properties, private methods, constructors, etc. are already grouped together and easy to find.</li>
<li>Hiding lots of similar entities may expose your code to a design problem. For example, when you have a class with hundred fields (which makes at least 500 lines of code if you count the comments and the whitespace), you may be tempted to put those fields inside a region, collapse it, and forget about them. With so many fields in a class, you should think better about using inheritance or slice the object into several objects.</li>
<li>Grouping together related things (an event with its delegate, or a method related to IO with other methods related to IO, etc.) may make the code difficult to read/maintain/improve over the time and the developpers team and may also expose a design problem.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="file_organization"></a>
File organization</h1>
<h2><a class="anchor" id="solution_tree"></a>
Solution tree</h2>
<p>ProjectFolder <b>OS</b> Tree = ProjectFolder <b>Visual</b> Tree = <b>namespaceTree</b> = <b>dllFileName</b> = <b>onlyOneConcept</b> </p><div class="fragment"><div class="line"><span class="comment">// Examples:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// namespaces tree :</span></div>
<div class="line"><span class="comment">// namespace Company.Product.Module.SubModule.Component</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// File system tree :</span></div>
<div class="line"><span class="comment">// Company</span></div>
<div class="line"><span class="comment">//    +-----&gt; Product</span></div>
<div class="line"><span class="comment">//               +-----&gt; .sln</span></div>
<div class="line"><span class="comment">//               |          +-----&gt; Module</span></div>
<div class="line"><span class="comment">//               |          |         +-----&gt; SubModule</span></div>
<div class="line"><span class="comment">//               |          |         |           +-----&gt; Component</span></div>
<div class="line"><span class="comment">//               |          |         |           |           +-----&gt; .csproj</span></div>
<div class="line"><span class="comment">//               |          |         |           |           +-----&gt; sources files</span></div>
<div class="line"><span class="comment">//               |          |         |           +-----&gt; ...</span></div>
<div class="line"><span class="comment">//               |          |         +-----&gt; ...</span></div>
<div class="line"><span class="comment">//               |          +---&gt; ...</span></div>
<div class="line"><span class="comment">//               +-----&gt; ...</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Visual Studio Solution Explorer tree :</span></div>
<div class="line"><span class="comment">// sln root</span></div>
<div class="line"><span class="comment">//    +-----&gt; Module folder</span></div>
<div class="line"><span class="comment">//    |             +-----&gt; SubModule folder</span></div>
<div class="line"><span class="comment">//    |             |               +-----&gt; Component project</span></div>
<div class="line"><span class="comment">//    |             |               |           +-----&gt; properties</span></div>
<div class="line"><span class="comment">//    |             |               |           +-----&gt; references</span></div>
<div class="line"><span class="comment">//    |             |               |           +-----&gt; sources</span></div>
<div class="line"><span class="comment">//    |             |               |</span></div>
<div class="line"><span class="comment">//    |             |               +-----&gt; ...</span></div>
<div class="line"><span class="comment">//    |             +-----&gt; ...</span></div>
<div class="line"><span class="comment">//    +---&gt; ...</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// From our root (where our .sln is located) project file we have : a sub directory Engine, then a subdir Render, then a project dir DX9 (which contain our sources)</span></div>
<div class="line"><span class="comment">// From our root Visual Studio Solution Explorer window, we have  : a sub directory Engine, then a subdir Render, then the project DX9 (which contain our sources)</span></div>
<div class="line"><span class="comment">// All sources will be encapsulated under the namespace Optis.Imagine.Cube.Engine.Render.DX9</span></div>
<div class="line"><span class="comment">// From the properties of this project, we will generate : Optis.Imagine.Cube.Engine.Render.DX9.dll</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceOptis.html">Optis</a>.Imagine.<a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#a74a0e870f2c061a70d06da4b18e1eec2aa296104f0c61a9cf39f4824d05315e12">Cube</a>.Engine.<a class="code" href="namespaceOptis_1_1Imagine_1_1Foundation_1_1Net.html#a634f7fa74d5a18ea6d935fe37c99953ba5e520da5341f2fec6d3bbfe7ef357922">Render</a>.DX9</div>
<div class="line"></div>
<div class="line"><span class="comment">// File system tree :</span></div>
<div class="line"><span class="comment">// Optis</span></div>
<div class="line"><span class="comment">//    +-----&gt; Cube</span></div>
<div class="line"><span class="comment">//               +-----&gt; .sln</span></div>
<div class="line"><span class="comment">//               |          +-----&gt; Engine</span></div>
<div class="line"><span class="comment">//               |          |         +-----&gt; Render</span></div>
<div class="line"><span class="comment">//               |          |         |           +-----&gt; DX9</span></div>
<div class="line"><span class="comment">//               |          |         |           |         +-----&gt; .csproj</span></div>
<div class="line"><span class="comment">//               |          |         |           |         +-----&gt; sources files</span></div>
<div class="line"><span class="comment">//               |          |         |           +-----&gt; ...</span></div>
<div class="line"><span class="comment">//               |          |         +-----&gt; ...</span></div>
<div class="line"><span class="comment">//               |          +---&gt; ...</span></div>
<div class="line"><span class="comment">//               +-----&gt; ...</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Visual Studio Solution Explorer tree :</span></div>
<div class="line"><span class="comment">// sln root</span></div>
<div class="line"><span class="comment">//    +-----&gt; Engine folder</span></div>
<div class="line"><span class="comment">//    |             +-----&gt; Render folder</span></div>
<div class="line"><span class="comment">//    |             |               +-----&gt; DX9 project</span></div>
<div class="line"><span class="comment">//    |             |               |           +-----&gt; properties</span></div>
<div class="line"><span class="comment">//    |             |               |           +-----&gt; references</span></div>
<div class="line"><span class="comment">//    |             |               |           +-----&gt; sources</span></div>
<div class="line"><span class="comment">//    |             |               |</span></div>
<div class="line"><span class="comment">//    |             |               +-----&gt; ...</span></div>
<div class="line"><span class="comment">//    |             +-----&gt; ...</span></div>
<div class="line"><span class="comment">//    +---&gt; ...</span></div>
</div><!-- fragment --><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Review this!</dd></dl>
<h2><a class="anchor" id="rules_coding_nspclass"></a>
Namespaces and classes</h2>
<ul>
<li>Name the source file according to what's inside. The type name should give it's name to the file.</li>
<li><p class="startli">Declare <b>all</b> member variables and <b>delagates/events</b> at the <b>top of a class</b> sorted <b>from public to private</b>, with static variables at the very top. Do the <b>same with methods</b>. </p><div class="fragment"><div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Account : AbstractAccount</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// --- public static members ---</span></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">string</span> BankName;</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> decimal Reserves;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- protected static members --- </span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- private static members --- </span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> _dateClosed;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//------------------------------</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- public members --- </span></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span>   Number      {<span class="keyword">get</span>; set;}</div>
<div class="line">    <span class="keyword">public</span> DateTime DateOpened  {<span class="keyword">get</span>; set;}</div>
<div class="line">    <span class="keyword">public</span> DateTime DateClosed  {<span class="keyword">get</span>; set;}</div>
<div class="line">    <span class="keyword">public</span> decimal  Balance     {<span class="keyword">get</span>; set;}</div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- protected    members --- </span></div>
<div class="line">    <span class="comment">// --- private      members --- </span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//------------------------------</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- public       events --- </span></div>
<div class="line">    <span class="comment">// --- protected    events --- </span></div>
<div class="line">    <span class="comment">// --- private      events --- </span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//------------------------------</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- public methods --- </span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Constructor</span></div>
<div class="line">    <span class="keyword">public</span> Account()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- protected methods --- </span></div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">override</span> Credit(decimal amount)</div>
<div class="line"></div>
<div class="line">    <span class="comment">// --- private methods --- </span></div>
<div class="line">}</div>
</div><!-- fragment --><p class="startli"><b>Why:</b> consistent with the Microsoft accepted practices. Files are alphabetically sorted and partial classes remain adjacent. Maintains good organization of your code base.</p>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Namespaces</dd></dl>
<h1><a class="anchor" id="rules_coding_codeimpl"></a>
Code implementation rules</h1>
<h2><a class="anchor" id="rules_coding_codeimpl_tryc"></a>
Exceptions</h2>
<h3><a class="anchor" id="rules_coding_codeimpl_tryc_hdl"></a>
Handle exceptions</h3>
<p>We could identify 4 kind of exceptions :</p><ul>
<li>Fatal exceptions (Examples: Thread aborted, Out of memory...)<ul>
<li>These exceptions will crashed the application whatever you do so don't try to handle them.</li>
<li>In WPF, they could be handled by the general event <code>DispatcherUnhandledException</code> on <code>Application</code> to beautify the message to user.</li>
</ul>
</li>
<li>Bug exceptions (Examples: NullException, Division by zero...)<ul>
<li>The application crash because of a developement issue, resolve the problem and stabilize the application before release it.</li>
<li>For example, you could use <code>ClampedAsin</code> instead of <code>Asin</code> to avoid <code>NaN</code> exceptions:</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// avoid to use</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> Asin(<span class="keywordtype">float</span> value)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Logger.html#af7a8c3b193df39fd582d1042b419b338aa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(value &gt;= -1f || value &lt;= 1f, <span class="stringliteral">&quot;Invalid argument!&quot;</span>, <span class="stringliteral">&quot;argument have to be in range [-1;1]&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)<a class="code" href="namespaceSystem.html">System</a>.Math.Asin((<span class="keywordtype">double</span>)value);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer to use</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> ClampedAsin(<span class="keywordtype">float</span> sine)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> Asin(Clamp(sine, -1f, 1f));</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>Vexing exceptions (Examples: Not a Number, Parse exception...)<ul>
<li>Thrown when an out-setted variable is in bad format or out of range.</li>
<li>When a public method could thrown this type of exception, the design pattern Try&lt;method name&gt; should exist and have to be used.</li>
<li>If no alternative method exist, keep the try-catch statement.</li>
</ul>
</li>
</ul>
<p>Note: For this three cases, no catch is needed but, if you use a disposable element, you could simplify your code by using the C# <code>using</code> statement: If you have a try-finally statement in which the only code in the finally block is a call to the <code>Dispose</code> method, use a <code>using</code> statement instead. </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line">Font font1 = <span class="keyword">new</span> Font(<span class="stringliteral">&quot;Arial&quot;</span>, 10.0f);</div>
<div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">    byte charset = font1.GdiCharSet;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">finally</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (font1 != null)</div>
<div class="line">    {</div>
<div class="line">        ((IDisposable)font1).Dispose();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keyword">using</span> (Font font2 = <span class="keyword">new</span> Font(<span class="stringliteral">&quot;Arial&quot;</span>, 10.0f))</div>
<div class="line">{</div>
<div class="line">    byte charset = font2.GdiCharSet;</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>Exogenous exceptions (Examples: File not found...)<ul>
<li>Just like vexing exception, an out-setted variable isn't in an expected state BUT the variable is used in an other thread or process so it could be modify between the state check and the use.</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordflow">if</span> (!FileExists(filename))</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle filename not found</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using</span> ( <a class="code" href="namespaceFile.html">File</a> f = OpenFile(filename, ForReading) )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Do stuff</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p> Here, the file could be deleted by another process between the check and the use, we have to use a try-catch statement.</p>
<p><b>Note:</b> When you would catch an exception, avoid the C# <code>using</code> statement and use the classic try-catch-finally statement (to keep the three states at same level).</p>
<div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using</span> ( <a class="code" href="namespaceFile.html">File</a> f = OpenFile(filename, ForReading) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Do stuff</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> (Exception)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Handle another exception</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (FileNotFoundException)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle filename not found</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceFile.html">File</a> f = OpenFile(filename, ForReading);</div>
<div class="line">    <span class="comment">// Do stuff</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (FileNotFoundException)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle filename not found</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (Exception)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle another exception</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">finally</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (f != null)</div>
<div class="line">    {</div>
<div class="line">        ((IDisposable)f).Dispose();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="rules_coding_codeimpl_tryc_trw"></a>
Throw exceptions</h3>
<p>When you have to throw an exception in a method, try to identify what kind of exception it is.</p>
<ul>
<li>If your method is public or protected and will be used in a SDK, don't forget to implement the Try&lt;method name&gt; alternative method.</li>
<li>If your method is private or internal, you could specify forbidden parameters and check variables before calling the method, in this case, you could use <code>Debug.Assert</code> instead of throwing an exception. <div class="fragment"><div class="line"><span class="comment">// &lt;summary&gt;</span></div>
<div class="line"><span class="comment">// Returns the angle whose the sine is the specified value.</span></div>
<div class="line"><span class="comment">// &lt;/summary&gt;</span></div>
<div class="line"><span class="comment">// &lt;param name=&quot;value&quot;&gt;A number between -1 and 1.&lt;/param&gt;</span></div>
<div class="line"><span class="comment">// &lt;returns&gt;The angle whose the sine is &lt;paramref name=&quot;value&quot;/&gt; if it is between -1 and 1, otherwise NaN.&lt;/returns&gt;</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> Asin(<span class="keywordtype">float</span> value)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceOptis_1_1Imagine_1_1Logger.html#af7a8c3b193df39fd582d1042b419b338aa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(value &gt;= -1f || value &lt;= 1f, <span class="stringliteral">&quot;Invalid argument!&quot;</span>, <span class="stringliteral">&quot;argument have to be in range [-1;1]&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)<a class="code" href="namespaceSystem.html">System</a>.Math.Asin((<span class="keywordtype">double</span>)value);</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>If your method is private or internal but called in a try-catch statement, try to refactor to avoid both try-catch statement and throwing an exception.</li>
</ul>
<h2><a class="anchor" id="rules_coding_codeimpl_op"></a>
operators</h2>
<p>To avoid exceptions and increase performance by skipping unnecessary comparisons, use &amp;&amp; instead of &amp; and || instead of | when you perform comparisons, as shown in the following example </p><div class="fragment"><div class="line">Console.Write(<span class="stringliteral">&quot;Enter a dividend: &quot;</span>);</div>
<div class="line">var dividend = <a class="code" href="AOGenerator_8cpp.html#a051c5280401c0d19b74edf5dc3a5ef2c">Convert</a>.ToInt32(Console.ReadLine());</div>
<div class="line"></div>
<div class="line">Console.Write(<span class="stringliteral">&quot;Enter a divisor: &quot;</span>);</div>
<div class="line">var divisor = <a class="code" href="AOGenerator_8cpp.html#a051c5280401c0d19b74edf5dc3a5ef2c">Convert</a>.ToInt32(Console.ReadLine());</div>
<div class="line"></div>
<div class="line"><span class="comment">// If the divisor is 0, the second clause in the following condition </span></div>
<div class="line"><span class="comment">// causes a run-time error. The &amp;&amp; operator short circuits when the </span></div>
<div class="line"><span class="comment">// first expression is false. That is, it does not evaluate the </span></div>
<div class="line"><span class="comment">// second expression. The &amp; operator evaluates both, and causes  </span></div>
<div class="line"><span class="comment">// a run-time error when divisor is 0. </span></div>
<div class="line"><span class="keywordflow">if</span> ((divisor != 0) &amp;&amp; (dividend / divisor &gt; 0))</div>
<div class="line">{</div>
<div class="line">    Console.WriteLine(<span class="stringliteral">&quot;Quotient: {0}&quot;</span>, dividend / divisor);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    Console.WriteLine(<span class="stringliteral">&quot;Attempted division by 0 ends up here.&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="rules_coding_codeimpl_typecast"></a>
Types and Cast</h2>
<ul>
<li>Use <b>predefined type names</b> instead of system type names <div class="fragment"><div class="line"><span class="comment">// Correct</span></div>
<div class="line"><span class="keywordtype">string</span>  firstName;</div>
<div class="line"><span class="keywordtype">int</span>     lastIndex;</div>
<div class="line"><span class="keywordtype">bool</span>    isSaved;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Avoid</span></div>
<div class="line"><a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1Content.html#a58556f87a6a5ed45a2970a1ad98b4b20a27118326006d3829667a400ad23d5d98">String</a>  firstName;</div>
<div class="line"><a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering_1_1Content.html#a58556f87a6a5ed45a2970a1ad98b4b20ac06129f6e6e15c09328365e553f1dc31">Int32</a>   lastIndex;</div>
<div class="line"><a class="code" href="namespaceOptis_1_1Imagine_1_1Rendering.html#a3c41b0165bb754f4366f58dc68fff93ba27226c864bac7454a8504f8edb15d95b">Boolean</a> isSaved;</div>
</div><!-- fragment --></li>
<li>Use <b>implicit type var</b> for local variable declarations. <div class="fragment"><div class="line"><span class="comment">// When the type of a variable is clear from the context, use var in the declaration. </span></div>
<div class="line">var var1 = <span class="stringliteral">&quot;This is clearly a string.&quot;</span>;</div>
<div class="line">var var2 = 27;</div>
<div class="line">var var3 = <a class="code" href="AOGenerator_8cpp.html#a051c5280401c0d19b74edf5dc3a5ef2c">Convert</a>.ToInt32(Console.ReadLine());</div>
<div class="line"></div>
<div class="line"><span class="comment">// Do not use var when the type is not apparent from the right side of the assignment</span></div>
<div class="line"><span class="keywordtype">int</span> var4 = ExampleClass.ResultSoFar();</div>
</div><!-- fragment --></li>
<li>Use implicit typing <b>'var'</b> to determine the type of the loop variable in foreach loops. Don't use it with classic <code>for</code> loops. <div class="fragment"><div class="line"><span class="comment">// The following example uses implicit typing in a foreach statement.</span></div>
<div class="line"><span class="keywordflow">foreach</span> (var ch <span class="keywordflow">in</span> laugh)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;h&#39;</span>)</div>
<div class="line">        Console.Write(<span class="stringliteral">&quot;H&quot;</span>);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        Console.Write(ch);</div>
<div class="line">}</div>
<div class="line">Console.WriteLine();</div>
</div><!-- fragment --></li>
</ul>
<p><b>Why:</b> consistent with the Microsoft's .NET Framework and makes code more natural to read. It also emoves clutter, particularly with complex generic types. Type is easily detected with Visual Studio tooltips.</p>
<p>Prefer <code>is</code> and <code>as</code> Operators While Casting. </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="comment">// this line may throw Exception if it is unable to downcast from Person to Employee</span></div>
<div class="line">var employee = (Employee)person;</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line"><span class="comment">// check if the person is Employee type</span></div>
<div class="line"><span class="keywordflow">if</span> (person is Employee)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>However, avoid the use of <code>is</code> and <code>as</code> in the same block code. </p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordflow">if</span> (person is Employee)</div>
<div class="line">{</div>
<div class="line">    var employee = person as Employee;</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// prefer</span></div>
<div class="line">var employee = person as Employee;</div>
<div class="line"><span class="keywordflow">if</span> (employee != null)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="rules_coding_codeimpl_str"></a>
Strings</h2>
<p>Prefer string.Format() or StringBuilder for string concatenations.</p>
<p>Any operation in the string will create a new object as string is an immutable object.So use + operator only to concatenate short strings. <br />
</p><div class="fragment"><div class="line"><span class="comment">// avoid</span></div>
<div class="line"><span class="keywordtype">string</span> str = <span class="stringliteral">&quot;k&quot;</span>;</div>
<div class="line">str += <span class="stringliteral">&quot;u&quot;</span>;</div>
<div class="line">str += <span class="stringliteral">&quot;n&quot;</span>;</div>
<div class="line">str += <span class="stringliteral">&quot;a&quot;</span>;</div>
<div class="line">str += <span class="stringliteral">&quot;l&quot;</span>;</div>
<div class="line">Console.WriteLine(str); </div>
</div><!-- fragment --><p>Use <code>string.Format()</code>, it will not create multiple objects instead will create a single one. </p><div class="fragment"><div class="line"><span class="keywordtype">string</span> str = <span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;{0}{1}{2}{3}{4}&quot;</span>, <span class="stringliteral">&quot;k&quot;</span>, <span class="stringliteral">&quot;u&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;l&quot;</span>);</div>
</div><!-- fragment --><p>StringBuilder as a mutable object will not create separate memory for each operation. So your application memory management will not be in critical stage. </p><div class="fragment"><div class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div>
<div class="line">sb.Append(<span class="stringliteral">&quot;k&quot;</span>);</div>
<div class="line">sb.Append(<span class="stringliteral">&quot;u&quot;</span>);</div>
<div class="line">sb.Append(<span class="stringliteral">&quot;n&quot;</span>);</div>
<div class="line">sb.Append(<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">sb.Append(<span class="stringliteral">&quot;l&quot;</span>);</div>
<div class="line"><span class="keywordtype">string</span> str = sb.ToString();</div>
</div><!-- fragment --><p><b>Why:</b> better perf</p>
<h2><a class="anchor" id="rules_coding_codeimpl_ext"></a>
C# Extensions</h2>
<p>Avoid as most as possible extension methods on internal types. Originaly implemented in C# 3.0 allowing syntactic mapping of LINQ to work well with IEnumerable (without having to modify IEnumerable which caused lot of problems), this is more or less the only way to use it correctly. Indeed, it may cause versionning troubles in other context.</p>
<p>Supposed another member of your team or a third editor provide an assembly x.dll which impl a class MyClass : </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>MyClass</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>You decide to write an 'Add' extension method for this class... </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#af76284d70e23a2210869000a3240471aaec211f7c20af43e742bf2570c3cb84f9">Add</a>( <span class="keyword">this</span> MyClass target, <span class="keywordtype">object</span> item)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>... and use it everywhere in your code.</p>
<p>Now, suppose the assembly pass now to the next version of the x.dll and provide an impl of an 'MyClass.Add' method which have a different behavior </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>MyClass</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOptis_1_1Imagine_1_1DataModel.html#af76284d70e23a2210869000a3240471aaec211f7c20af43e742bf2570c3cb84f9">Add</a>( <span class="keywordtype">object</span> item)</div>
<div class="line">    {</div>
<div class="line">        ...</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The project will build without any trouble but your code behavior will be changed as now this is the Add method of an object of type MyClass which will be called instead of your extension method.</p>
<h1><a class="anchor" id="rules_coding_comments"></a>
Comments the code</h1>
<h2><a class="anchor" id="special_comments"></a>
Special comments</h2>
<p>Prefer the <b>TODO</b> or <b>FIXME</b> or <b>BUG</b> comment tags (followed by the name of the developper or a ticket) to be consistent between visual and doxygen API doc. See <a class="el" href="page_gendoc.html#doc_overview">Overview of Doxygen generation</a> : </p><div class="fragment"><div class="line"><span class="comment">// TODO(kl@gmail.com): Use a &quot;*&quot; here for concatenation operator.</span></div>
<div class="line"><span class="comment">// FIXME(Zeke) will crash when using special character (handle this please)</span></div>
<div class="line"><span class="comment">// BUG(5548) ticket related to the multithreaded enginepanel memory leak problem</span></div>
</div><!-- fragment --><h2><a class="anchor" id="trash_code_comments"></a>
Trash code comments</h2>
<p>Do let as <b>less as possible commented code</b> or at least <b>comment the commented code</b> to explain why you want to let it there (what it could do): </p><div class="fragment"><div class="line"><span class="comment">// The commented code here will measure only 1 desync between min and max spent time over the whole list of clients but more desync may occur over multiple clients (optimized the code bellow?)        </span></div>
<div class="line"><span class="comment">// int maxCurrentDiffDesyncTime = clientDrawTimes.Max() - clientDrawTimes.Min();</span></div>
</div><!-- fragment --><p>When you are commenting something, here is an exaustive list of <b>first words to use</b> acording to the kind of code: </p><table class="doxtable">
<tr>
<th>code is </th><th>must begin with  </th></tr>
<tr>
<td>class </td><td>'Represents '... &lt;your explanation&gt; </td></tr>
<tr>
<td>method </td><td>use an action verb ('Moves', 'Puts', 'Activates'...) </td></tr>
<tr>
<td>property </td><td>'Gets' (if get is implemented) and/or 'Sets' (if set is implemented) </td></tr>
</table>
<dl class="section warning"><dt>Warning</dt><dd>Do not describe the code itself. Assume that the person reading the code knows C++ better than you do, even though he or she does not know what you are trying to do : <div class="fragment"><div class="line"><span class="comment">// Now go through the b array and make sure that if i occurs,</span></div>
<div class="line"><span class="comment">// the next element is i+1.</span></div>
<div class="line"><span class="comment">// Geez.  What a useless comment.</span></div>
</div><!-- fragment --></dd></dl>
<h2><a class="anchor" id="rules_comment_code_csharp"></a>
Comment C# code</h2>
<p>Standard visual studio C# comments use XML (see <a href="https://msdn.microsoft.com/fr-fr/library/5ast78ax.aspx">MSVC suggestions</a> and <a href="http://www.stack.nl/~dimitri/doxygen/manual/xmlcmds.html">doxygen ones</a>) <br />
</p><ul>
<li>Do not use tags from an external tool (like doxygen), prefer the .dox file for this.</li>
<li>Doxygen tags could be allowed when you want to create a custom diagram related to a class or method using \msc tag for example.</li>
</ul>
<h2><a class="anchor" id="rules_comment_code_cpp"></a>
Comment C++ code</h2>
<ul>
<li>XML comments work in C++ and must be used to keep consistency with C#. Visual Studio will use them regularly (which is not the case of Doxygen comments).</li>
<li>On commented methods : please describe the parameters (if it's input or output variable).</li>
</ul>
<h1><a class="anchor" id="rules_references"></a>
See also</h1>
<ul>
<li><a href="https://msdn.microsoft.com/en-us/library/ff926074.aspx">MSDN ones</a></li>
<li><a href="http://simtfsserver/sites/DefaultCollection/SimplyCube/Documentation/Coding%20rules/AvSol%20Coding%20Guidelines%20for%20CSharp%203.0-5.0.pdf">AvSol Coding Guidelines for CSharp 3.0-5.0.pdf</a></li>
<li><a href="http://simtfsserver/sites/DefaultCollection/SimplyCube/Documentation/Coding%20rules/Encodo-CSharp-Handbook.pdf">Encodo-CSharp-Handbook.pdf</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 20 2017 03:11:04 for DEV Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
